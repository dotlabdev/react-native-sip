{"version":3,"sources":["Endpoint.ts"],"names":["EventEmitter","DeviceEventEmitter","NativeModules","Account","Call","Message","ORIENTATIONS","Endpoint","constructor","addListener","_onRegistrationChanged","bind","_onCallReceived","_onCallChanged","_onCallTerminated","_onCallScreenLocked","_onMessageReceived","_onConnectivityChanged","_onGSMChanged","start","configuration","Promise","resolve","reject","PjSipModule","successful","data","accounts","calls","hasOwnProperty","forEach","d","push","extra","Object","entries","key","value","stop","updateStunServers","accountId","stunServerList","changeNetworkConfiguration","changeServiceConfiguration","createAccount","registerAccount","account","renew","getId","deleteAccount","makeCall","destination","callSettings","msgData","normalizedDestination","_normalize","sendMessage","msg","imTyping","isTyping","answerCall","call","hangupCall","declineCall","holdCall","unholdCall","muteCall","unMuteCall","useSpeaker","useEarpiece","xferCall","xferReplacesCall","destCall","redirectCall","dtmfCall","digits","activateAudioSession","deactivateAudioSession","changeOrientation","orientation","indexOf","Error","JSON","stringify","join","changeCodecSettings","codecSettings","emit","lock","normalizedData","startsWith","realm","getRegServer","getDomain","s","substr"],"mappings":"AAAA;AACA,SAASA,YAAT,QAA6B,QAA7B;AACA,SAASC,kBAAT,EAA6BC,aAA7B,QAAkD,cAAlD;AACA,OAAOC,OAAP,MAA4C,WAA5C;AACA,OAAOC,IAAP,MAAsC,QAAtC;AACA,OAAOC,OAAP,MAAoB,WAApB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AA+FA,OAAO,MAAMC,YAAY,GAAG,CAC1B,wBAD0B,EAE1B,6BAF0B,EAG1B,8BAH0B,EAI1B,8BAJ0B,EAK1B,wBAL0B,CAArB;AAeP,eAAe,MAAMC,QAAN,SAAuBP,YAAvB,CAAoC;AACjDQ,EAAAA,WAAW,GAAG;AACZ,YADY,CAGZ;;AACAP,IAAAA,kBAAkB,CAACQ,WAAnB,CACE,0BADF,EAEE,KAAKC,sBAAL,CAA4BC,IAA5B,CAAiC,IAAjC,CAFF,EAJY,CASZ;;AACAV,IAAAA,kBAAkB,CAACQ,WAAnB,CACE,mBADF,EAEE,KAAKG,eAAL,CAAqBD,IAArB,CAA0B,IAA1B,CAFF;AAIAV,IAAAA,kBAAkB,CAACQ,WAAnB,CACE,kBADF,EAEE,KAAKI,cAAL,CAAoBF,IAApB,CAAyB,IAAzB,CAFF;AAIAV,IAAAA,kBAAkB,CAACQ,WAAnB,CACE,qBADF,EAEE,KAAKK,iBAAL,CAAuBH,IAAvB,CAA4B,IAA5B,CAFF;AAIAV,IAAAA,kBAAkB,CAACQ,WAAnB,CACE,uBADF,EAEE,KAAKM,mBAAL,CAAyBJ,IAAzB,CAA8B,IAA9B,CAFF;AAIAV,IAAAA,kBAAkB,CAACQ,WAAnB,CACE,sBADF,EAEE,KAAKO,kBAAL,CAAwBL,IAAxB,CAA6B,IAA7B,CAFF;AAIAV,IAAAA,kBAAkB,CAACQ,WAAnB,CACE,0BADF,EAEE,KAAKQ,sBAAL,CAA4BN,IAA5B,CAAiC,IAAjC,CAFF;AAIAV,IAAAA,kBAAkB,CAACQ,WAAnB,CACE,iBADF,EAEE,KAAKS,aAAL,CAAmBP,IAAnB,CAAwB,IAAxB,CAFF;AAID;AAED;AACF;AACA;AACA;AACA;AACA;;;AACEQ,EAAAA,KAAK,CAACC,aAAD,EAAqB;AACxB,WAAO,IAAIC,OAAJ,CAA2B,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACrDrB,MAAAA,aAAa,CAACsB,WAAd,CAA0BL,KAA1B,CACEC,aADF,EAEE,CAACK,UAAD,EAAsBC,IAAtB,KAA4C;AAC1C,YAAID,UAAJ,EAAgB;AACd,gBAAME,QAAwB,GAAG,EAAjC;AACA,gBAAMC,KAAkB,GAAG,EAA3B;;AAEA,cAAIF,IAAI,CAACG,cAAL,CAAoB,UAApB,CAAJ,EAAqC;AACnCH,YAAAA,IAAI,CAACC,QAAL,CAAcG,OAAd,CAAuBC,CAAD,IAA2B;AAC/CJ,cAAAA,QAAQ,CAACK,IAAT,CAAc,IAAI7B,OAAJ,CAAY4B,CAAZ,CAAd;AACD,aAFD;AAGD;;AAED,cAAIL,IAAI,CAACG,cAAL,CAAoB,OAApB,CAAJ,EAAkC;AAChCH,YAAAA,IAAI,CAACE,KAAL,CAAWE,OAAX,CAAoBC,CAAD,IAAwB;AACzCH,cAAAA,KAAK,CAACI,IAAN,CAAW,IAAI5B,IAAJ,CAAS2B,CAAT,CAAX;AACD,aAFD;AAGD;;AAED,gBAAME,KAAU,GAAG,EAAnB;AACAC,UAAAA,MAAM,CAACC,OAAP,CAAeT,IAAf,EAAqBI,OAArB,CAA6B,CAAC,CAACM,GAAD,EAAMC,KAAN,CAAD,KAAkB;AAC7C,gBACEX,IAAI,CAACG,cAAL,CAAoBO,GAApB,KACAA,GAAG,KAAK,UADR,IAEAA,GAAG,KAAK,OAHV,EAIE;AACAH,cAAAA,KAAK,CAACG,GAAD,CAAL,GAAaC,KAAb;AACD;AACF,WARD;AAUAf,UAAAA,OAAO,CAAC;AACNK,YAAAA,QADM;AAENC,YAAAA,KAFM;AAGN,eAAGK;AAHG,WAAD,CAAP;AAKD,SAhCD,MAgCO;AACLV,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OAtCH;AAwCD,KAzCM,CAAP;AA0CD;;AAEDY,EAAAA,IAAI,GAAG;AACL,WAAO,IAAIjB,OAAJ,CAAaC,OAAD,IAAa;AAC9BpB,MAAAA,aAAa,CAACsB,WAAd,CAA0Bc,IAA1B,CAA+B,MAAM;AACnChB,QAAAA,OAAO,CAAC,EAAD,CAAP;AACD,OAFD;AAGD,KAJM,CAAP;AAKD;;AAEDiB,EAAAA,iBAAiB,CAACC,SAAD,EAAoBC,cAApB,EAAyC;AACxD,WAAO,IAAIpB,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0Be,iBAA1B,CACEC,SADF,EAEEC,cAFF,EAGE,CAAChB,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OATH;AAWD,KAZM,CAAP;AAaD;AAED;AACF;AACA;AACA;;;AACEgB,EAAAA,0BAA0B,CAACtB,aAAD,EAAqB;AAC7C,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0BkB,0BAA1B,CACEtB,aADF,EAEE,CAACK,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OARH;AAUD,KAXM,CAAP;AAYD;AAED;AACF;AACA;AACA;;;AACEiB,EAAAA,0BAA0B,CAACvB,aAAD,EAAqB;AAC7C,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0BmB,0BAA1B,CACEvB,aADF,EAEE,CAACK,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OARH;AAUD,KAXM,CAAP;AAYD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACEkB,EAAAA,aAAa,CAACxB,aAAD,EAA4C;AACvD,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0BoB,aAA1B,CACExB,aADF,EAEE,CAACK,UAAD,EAAsBC,IAAtB,KAAmD;AACjD,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAAC,IAAInB,OAAJ,CAAYuB,IAAZ,CAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OARH;AAUD,KAXM,CAAP;AAYD,GA5LgD,CA8LjD;AACA;AACA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACEmB,EAAAA,eAAe,CAACC,OAAD,EAAmBC,KAAK,GAAG,IAA3B,EAAiC;AAC9C,WAAO,IAAI1B,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0BqB,eAA1B,CACEC,OAAO,CAACE,KAAR,EADF,EAEED,KAFF,EAGE,CAACtB,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OATH;AAWD,KAZM,CAAP;AAaD;AAED;AACF;AACA;AACA;AACA;AACA;;;AACEuB,EAAAA,aAAa,CAACH,OAAD,EAAmB;AAC9B,WAAO,IAAIzB,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0ByB,aAA1B,CACEH,OAAO,CAACE,KAAR,EADF,EAEE,CAACvB,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OARH;AAUD,KAXM,CAAP;AAYD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACEwB,EAAAA,QAAQ,CACNJ,OADM,EAENK,WAFM,EAGNC,YAHM,EAINC,OAJM,EAKN;AACA,UAAMC,qBAAqB,GAAG,KAAKC,UAAL,CAAgBT,OAAhB,EAAyBK,WAAzB,CAA9B;;AAEA,WAAO,IAAI9B,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0B0B,QAA1B,CACEJ,OAAO,CAACE,KAAR,EADF,EAEEM,qBAFF,EAGEF,YAHF,EAIEC,OAJF,EAKE,CAAC5B,UAAD,EAAsBC,IAAtB,KAAgD;AAC9C,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAAC,IAAIlB,IAAJ,CAASsB,IAAT,CAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OAXH;AAaD,KAdM,CAAP;AAeD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;;AACE8B,EAAAA,WAAW,CAACV,OAAD,EAAmBK,WAAnB,EAAwCM,GAAxC,EAAqD;AAC9D,UAAMH,qBAAqB,GAAG,KAAKC,UAAL,CAAgBT,OAAhB,EAAyBK,WAAzB,CAA9B;;AAEA,WAAO,IAAI9B,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0BgC,WAA1B,CACEV,OAAO,CAACE,KAAR,EADF,EAEEM,qBAFF,EAGEG,GAHF,EAIE,CAAChC,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OAVH;AAYD,KAbM,CAAP;AAcD;;AAEDgC,EAAAA,QAAQ,CAACZ,OAAD,EAAmBK,WAAnB,EAAwCQ,QAAxC,EAA2D;AACjE,UAAML,qBAAqB,GAAG,KAAKC,UAAL,CAAgBT,OAAhB,EAAyBK,WAAzB,CAA9B;;AAEA,WAAO,IAAI9B,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0BkC,QAA1B,CACEZ,OAAO,CAACE,KAAR,EADF,EAEEM,qBAFF,EAGEK,QAHF,EAIE,CAAClC,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OAVH;AAYD,KAbM,CAAP;AAcD;AAED;AACF;AACA;AACA;AACA;AACA;;;AACEkC,EAAAA,UAAU,CAACC,IAAD,EAAa;AACrB,WAAO,IAAIxC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0BoC,UAA1B,CACEC,IAAI,CAACb,KAAL,EADF,EAEE,CAACvB,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OARH;AAUD,KAXM,CAAP;AAYD;AAED;AACF;AACA;AACA;AACA;AACA;;;AACEoC,EAAAA,UAAU,CAACD,IAAD,EAAa;AACrB;AACA,WAAO,IAAIxC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0BsC,UAA1B,CACED,IAAI,CAACb,KAAL,EADF,EAEE,CAACvB,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OARH;AAUD,KAXM,CAAP;AAYD;AAED;AACF;AACA;AACA;AACA;AACA;;;AACEqC,EAAAA,WAAW,CAACF,IAAD,EAAa;AACtB,WAAO,IAAIxC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0BuC,WAA1B,CACEF,IAAI,CAACb,KAAL,EADF,EAEE,CAACvB,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OARH;AAUD,KAXM,CAAP;AAYD;AAED;AACF;AACA;AACA;AACA;AACA;;;AACEsC,EAAAA,QAAQ,CAACH,IAAD,EAAa;AACnB,WAAO,IAAIxC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0BwC,QAA1B,CACEH,IAAI,CAACb,KAAL,EADF,EAEE,CAACvB,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OARH;AAUD,KAXM,CAAP;AAYD;AAED;AACF;AACA;AACA;AACA;AACA;;;AACEuC,EAAAA,UAAU,CAACJ,IAAD,EAAa;AACrB,WAAO,IAAIxC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0ByC,UAA1B,CACEJ,IAAI,CAACb,KAAL,EADF,EAEE,CAACvB,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OARH;AAUD,KAXM,CAAP;AAYD;AAED;AACF;AACA;AACA;;;AACEwC,EAAAA,QAAQ,CAACL,IAAD,EAAa;AACnB,WAAO,IAAIxC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0B0C,QAA1B,CACEL,IAAI,CAACb,KAAL,EADF,EAEE,CAACvB,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OARH;AAUD,KAXM,CAAP;AAYD;AAED;AACF;AACA;AACA;;;AACEyC,EAAAA,UAAU,CAACN,IAAD,EAAa;AACrB,WAAO,IAAIxC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0B2C,UAA1B,CACEN,IAAI,CAACb,KAAL,EADF,EAEE,CAACvB,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OARH;AAUD,KAXM,CAAP;AAYD;AAED;AACF;AACA;AACA;;;AACE0C,EAAAA,UAAU,CAACP,IAAD,EAAa;AACrB,WAAO,IAAIxC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0B4C,UAA1B,CACEP,IAAI,CAACb,KAAL,EADF,EAEE,CAACvB,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OARH;AAUD,KAXM,CAAP;AAYD;AAED;AACF;AACA;AACA;;;AACE2C,EAAAA,WAAW,CAACR,IAAD,EAAa;AACtB,WAAO,IAAIxC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0B6C,WAA1B,CACER,IAAI,CAACb,KAAL,EADF,EAEE,CAACvB,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OARH;AAUD,KAXM,CAAP;AAYD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACE4C,EAAAA,QAAQ,CAACxB,OAAD,EAAmBe,IAAnB,EAA+BV,WAA/B,EAAoD;AAC1D,UAAMG,qBAAqB,GAAG,KAAKC,UAAL,CAAgBT,OAAhB,EAAyBK,WAAzB,CAA9B;;AAEA,WAAO,IAAI9B,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0B8C,QAA1B,CACET,IAAI,CAACb,KAAL,EADF,EAEEM,qBAFF,EAGE,CAAC7B,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OATH;AAWD,KAZM,CAAP;AAaD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACE6C,EAAAA,gBAAgB,CAACV,IAAD,EAAaW,QAAb,EAA6B;AAC3C,WAAO,IAAInD,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0B+C,gBAA1B,CACEV,IAAI,CAACb,KAAL,EADF,EAEEwB,QAAQ,CAACxB,KAAT,EAFF,EAGE,CAACvB,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OATH;AAWD,KAZM,CAAP;AAaD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACE+C,EAAAA,YAAY,CAAC3B,OAAD,EAAmBe,IAAnB,EAA+BV,WAA/B,EAAoD;AAC9D,UAAMG,qBAAqB,GAAG,KAAKC,UAAL,CAAgBT,OAAhB,EAAyBK,WAAzB,CAA9B;;AAEA,WAAO,IAAI9B,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0BiD,YAA1B,CACEZ,IAAI,CAACb,KAAL,EADF,EAEEM,qBAFF,EAGE,CAAC7B,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OATH;AAWD,KAZM,CAAP;AAaD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;;;AACEgD,EAAAA,QAAQ,CAACb,IAAD,EAAac,MAAb,EAA6B;AACnC,WAAO,IAAItD,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0BkD,QAA1B,CACEb,IAAI,CAACb,KAAL,EADF,EAEE2B,MAFF,EAGE,CAAClD,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OATH;AAWD,KAZM,CAAP;AAaD;;AAEDkD,EAAAA,oBAAoB,GAAG;AACrB,WAAO,IAAIvD,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0BoD,oBAA1B,CACE,CAACnD,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OAPH;AASD,KAVM,CAAP;AAWD;;AAEDmD,EAAAA,sBAAsB,GAAG;AACvB,WAAO,IAAIxD,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0BqD,sBAA1B,CACE,CAACpD,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OAPH;AASD,KAVM,CAAP;AAWD;;AAEDoD,EAAAA,iBAAiB,CAACC,WAAD,EAA+B;AAC9C,QAAIzE,YAAY,CAAC0E,OAAb,CAAqBD,WAArB,MAAsC,CAAC,CAA3C,EAA8C;AAC5C,YAAM,IAAIE,KAAJ,CACH,WAAUC,IAAI,CAACC,SAAL,CACTJ,WADS,CAET,qCAAoCzE,YAAY,CAAC8E,IAAb,CAAkB,IAAlB,CAAwB,SAH1D,CAAN;AAKD;;AAEDlF,IAAAA,aAAa,CAACsB,WAAd,CAA0BsD,iBAA1B,CAA4CC,WAA5C;AACD;;AAEDM,EAAAA,mBAAmB,CAACC,aAAD,EAAqB;AACtC,WAAO,IAAIjE,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCrB,MAAAA,aAAa,CAACsB,WAAd,CAA0B6D,mBAA1B,CACEC,aADF,EAEE,CAAC7D,UAAD,EAAsBC,IAAtB,KAAoC;AAClC,YAAID,UAAJ,EAAgB;AACdH,UAAAA,OAAO,CAACI,IAAD,CAAP;AACD,SAFD,MAEO;AACLH,UAAAA,MAAM,CAACG,IAAD,CAAN;AACD;AACF,OARH;AAUD,KAXM,CAAP;AAYD;AAED;AACF;AACA;AACA;AACA;;;AACET,EAAAA,sBAAsB,CAACS,IAAD,EAA2B;AAC/C;AACJ;AACA;AACA;AACA;AACA;AACI,SAAK6D,IAAL,CAAU,sBAAV,EAAkC,IAAIpF,OAAJ,CAAYuB,IAAZ,CAAlC;AACD;AAED;AACF;AACA;AACA;AACA;;;AACER,EAAAA,aAAa,CAACQ,IAAD,EAAY;AACvB;AACJ;AACA;AACA;AACA;AACA;AACI,SAAK6D,IAAL,CAAU,aAAV,EAAyB7D,IAAzB;AACD;AAED;AACF;AACA;AACA;AACA;;;AACEhB,EAAAA,sBAAsB,CAACgB,IAAD,EAAY;AAChC;AACJ;AACA;AACA;AACA;AACA;AACI,SAAK6D,IAAL,CAAU,sBAAV,EAAkC,IAAIpF,OAAJ,CAAYuB,IAAZ,CAAlC;AACD;AAED;AACF;AACA;AACA;AACA;;;AACEd,EAAAA,eAAe,CAACc,IAAD,EAAwB;AACrC;AACJ;AACA;AACA;AACA;AACA;AACI,SAAK6D,IAAL,CAAU,eAAV,EAA2B,IAAInF,IAAJ,CAASsB,IAAT,CAA3B;AACD;AAED;AACF;AACA;AACA;AACA;;;AACEb,EAAAA,cAAc,CAACa,IAAD,EAAwB;AACpC;AACJ;AACA;AACA;AACA;AACA;AACI,SAAK6D,IAAL,CAAU,cAAV,EAA0B,IAAInF,IAAJ,CAASsB,IAAT,CAA1B;AACD;AAED;AACF;AACA;AACA;AACA;;;AACEZ,EAAAA,iBAAiB,CAACY,IAAD,EAAwB;AACvC;AACJ;AACA;AACA;AACA;AACA;AACI,SAAK6D,IAAL,CAAU,iBAAV,EAA6B,IAAInF,IAAJ,CAASsB,IAAT,CAA7B;AACD;AAED;AACF;AACA;AACA;AACA;;;AACEX,EAAAA,mBAAmB,CAACyE,IAAD,EAAgB;AACjC;AACJ;AACA;AACA;AACA;AACA;AACI,SAAKD,IAAL,CAAU,oBAAV,EAAgCC,IAAhC;AACD;AAED;AACF;AACA;AACA;AACA;;;AACExE,EAAAA,kBAAkB,CAACU,IAAD,EAAY;AAC5B;AACJ;AACA;AACA;AACA;AACA;AACI,SAAK6D,IAAL,CAAU,kBAAV,EAA8B,IAAIlF,OAAJ,CAAYqB,IAAZ,CAA9B;AACD,GA5wBgD,CA8wBjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;;AACE6B,EAAAA,UAAU,CAACT,OAAD,EAAmBK,WAAnB,EAAwC;AAChD,QAAIsC,cAAc,GAAG,IAArB;;AACA,QAAI,CAACtC,WAAW,CAACuC,UAAZ,CAAuB,MAAvB,CAAL,EAAqC;AACnC,UAAIC,KAAK,GAAG7C,OAAO,CAAC8C,YAAR,EAAZ;;AAEA,UAAI,CAACD,KAAL,EAAY;AACVA,QAAAA,KAAK,GAAG7C,OAAO,CAAC+C,SAAR,EAAR;AACA,cAAMC,CAAC,GAAGH,KAAK,CAACX,OAAN,CAAc,GAAd,CAAV;;AAEA,YAAIc,CAAC,GAAG,CAAR,EAAW;AACTH,UAAAA,KAAK,GAAGA,KAAK,CAACI,MAAN,CAAa,CAAb,EAAgBD,CAAC,GAAG,CAApB,CAAR;AACD;AACF;;AAEDL,MAAAA,cAAc,GAAI,OAAMtC,WAAY,IAAGwC,KAAM,EAA7C;AACD;;AAED,WAAOF,cAAP;AACD,GArzBgD,CAszBjD;AACA;AACA;AACA;AAEA;AACA;;;AA5zBiD","sourcesContent":["/* eslint-disable camelcase */\nimport { EventEmitter } from 'events';\nimport { DeviceEventEmitter, NativeModules } from 'react-native';\nimport Account, { AccountConstructor } from './Account';\nimport Call, { CallConstructor } from './Call';\nimport Message from './Message';\n\n/**\n * SIP headers object, where each key is a header name and value is a header value.\n * Example:\n * {\n *   \"X-Custom-Header\": \"Test Header Value\",\n *   \"X-Custom-ID\": \"Awesome Header\"\n * }\n *\n * @typedef {Object} PjSipHdrList\n */\n\n/**\n * An additional information to be sent with outgoing SIP message.\n * It can (optionally) be specified for example\n * with #Endpoint.makeCall(), #Endpoint.answerCall(), #Endpoint.hangupCall(),\n * #Endpoint.holdCall() and many more.\n *\n * @typedef {Object} PjSipMsgData\n * @property {String} target_uri - Indicates whether the Courage component is present.\n * @property {PjSipHdrList} hdr_list - Additional message headers as linked list.\n * @property {String} content_type - MIME type of optional message body.\n * @property {String} msg_body - MIME type of optional message body.\n */\n\n/**\n * An additional information to be sent with outgoing SIP message.\n * It can (optionally) be specified for example\n * with #Endpoint.makeCall(), #Endpoint.answerCall(), #Endpoint.hangupCall(),\n * #Endpoint.holdCall() and many more.\n *\n * @typedef {Object} PjSipCallSetttings\n * @property {number} flag - Bitmask of #pjsua_call_flag constants.\n * @property {number} req_keyframe_method - This flag controls what methods to request\n * keyframe are allowed on the call.\n * @property {number} aud_cnt - Number of simultaneous active audio streams for this call.\n * Setting this to zero will disable audio in this call.\n * @property {number} vid_cnt - Number of simultaneous active video streams for this call.\n * Setting this to zero will disable video in this call.\n */\n\nexport interface startResult {\n  accounts: Array<AccountConstructor>;\n  calls: Array<CallConstructor>;\n  settings: any;\n  connectivity: any;\n}\n\nexport interface EndpointStart {\n  accounts: Array<Account>;\n  calls: Array<Call>;\n  [key: string]: any;\n}\n\nexport interface createAccountConfiguration {\n  name: string;\n  username: string;\n  domain: string;\n  password: string;\n  proxy: string;\n  transport: string;\n  regServer: string;\n  regTimeout: number;\n}\n\nexport interface PjSipCallSetttings {\n  /**\n   *\n   * Bitmask of #pjsua_call_flag constants.\n   * @type {number}\n   * @memberof PjSipCallSetttings\n   */\n  flag: number;\n\n  /**\n   *\n   * This flag controls what methods to request keyframe are allowed on the call.\n   * @type {number}\n   * @memberof PjSipCallSetttings\n   */\n  req_keyfram_method: number;\n\n  /**\n   *\n   * Number of simultaneous active audio streams for this call. Setting this to zero will disable audio in this call.\n   * @type {number}\n   * @memberof PjSipCallSetttings\n   */\n  aud_cnt: number;\n\n  /**\n   *\n   * Number of simultaneous active video streams for this call. Setting this to zero will disable video in this call.\n   * @type {number}\n   * @memberof PjSipCallSetttings\n   */\n  vid_cnt: number;\n}\nexport interface PjSipMsgData {\n  /**\n   *\n   * Indicates whether the Courage component is present.\n   * @type {string}\n   * @memberof PjSipMsgData\n   */\n  target_uri: string;\n\n  /**\n   *\n   * Additional message headers as linked list.\n   * @type {*}\n   * @memberof PjSipMsgData\n   */\n  hdr_list: {\n    [key: string]: string | number;\n  };\n\n  /**\n   *\n   * MIME type of optional message body.\n   * @type {string}\n   * @memberof PjSipMsgData\n   */\n  content_type: string;\n\n  /**\n   *\n   * MIME type of optional message body.\n   * @type {string}\n   * @memberof PjSipMsgData\n   */\n  msg_body: string;\n}\n\nexport const ORIENTATIONS = [\n  'PJMEDIA_ORIENT_UNKNOWN',\n  'PJMEDIA_ORIENT_ROTATE_90DEG',\n  'PJMEDIA_ORIENT_ROTATE_270DEG',\n  'PJMEDIA_ORIENT_ROTATE_180DEG',\n  'PJMEDIA_ORIENT_NATURAL',\n];\n\nexport type OrientationType =\n  | 'PJMEDIA_ORIENT_UNKNOWN'\n  | 'PJMEDIA_ORIENT_ROTATE_90DEG'\n  | 'PJMEDIA_ORIENT_ROTATE_270DEG'\n  | 'PJMEDIA_ORIENT_ROTATE_180DEG'\n  | 'PJMEDIA_ORIENT_NATURAL';\n\nexport default class Endpoint extends EventEmitter {\n  constructor() {\n    super();\n\n    // Subscribe to Accounts events\n    DeviceEventEmitter.addListener(\n      'pjSipRegistrationChanged',\n      this._onRegistrationChanged.bind(this)\n    );\n\n    // Subscribe to Calls events\n    DeviceEventEmitter.addListener(\n      'pjSipCallReceived',\n      this._onCallReceived.bind(this)\n    );\n    DeviceEventEmitter.addListener(\n      'pjSipCallChanged',\n      this._onCallChanged.bind(this)\n    );\n    DeviceEventEmitter.addListener(\n      'pjSipCallTerminated',\n      this._onCallTerminated.bind(this)\n    );\n    DeviceEventEmitter.addListener(\n      'pjSipCallScreenLocked',\n      this._onCallScreenLocked.bind(this)\n    );\n    DeviceEventEmitter.addListener(\n      'pjSipMessageReceived',\n      this._onMessageReceived.bind(this)\n    );\n    DeviceEventEmitter.addListener(\n      'pjSipConnectivityChanged',\n      this._onConnectivityChanged.bind(this)\n    );\n    DeviceEventEmitter.addListener(\n      'pjSipGSMChanged',\n      this._onGSMChanged.bind(this)\n    );\n  }\n\n  /**\n   * Returns a Promise that will be resolved once PjSip module is initialized.\n   * Do not call any function while library is not initialized.\n   *\n   * @returns {Promise}\n   */\n  start(configuration: any) {\n    return new Promise<EndpointStart>((resolve, reject) => {\n      NativeModules.PjSipModule.start(\n        configuration,\n        (successful: boolean, data: startResult) => {\n          if (successful) {\n            const accounts: Array<Account> = [];\n            const calls: Array<Call> = [];\n\n            if (data.hasOwnProperty('accounts')) {\n              data.accounts.forEach((d: AccountConstructor) => {\n                accounts.push(new Account(d));\n              });\n            }\n\n            if (data.hasOwnProperty('calls')) {\n              data.calls.forEach((d: CallConstructor) => {\n                calls.push(new Call(d));\n              });\n            }\n\n            const extra: any = {};\n            Object.entries(data).forEach(([key, value]) => {\n              if (\n                data.hasOwnProperty(key) &&\n                key !== 'accounts' &&\n                key !== 'calls'\n              ) {\n                extra[key] = value;\n              }\n            });\n\n            resolve({\n              accounts,\n              calls,\n              ...extra,\n            });\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  stop() {\n    return new Promise((resolve) => {\n      NativeModules.PjSipModule.stop(() => {\n        resolve({});\n      });\n    });\n  }\n\n  updateStunServers(accountId: number, stunServerList: any) {\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.updateStunServers(\n        accountId,\n        stunServerList,\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * @param configuration\n   * @returns {Promise}\n   */\n  changeNetworkConfiguration(configuration: any) {\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.changeNetworkConfiguration(\n        configuration,\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * @param configuration\n   * @returns {Promise}\n   */\n  changeServiceConfiguration(configuration: any) {\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.changeServiceConfiguration(\n        configuration,\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * Add a new account. If registration is configured for this account, this function would also start the\n   * SIP registration session with the SIP registrar server. This SIP registration session will be maintained\n   * internally by the library, and application doesn't need to do anything to maintain the registration session.\n   *\n   * An example configuration:\n   * {\n   *   name: \"John Doe\",\n   *   username: \"100\",\n   *   domain: \"pbx.com\",\n   *   password: \"XXXXXX\",\n   *\n   *   proxy: \"192.168.100.1:5060\", // default disabled.\n   *   transport: \"TCP\", // default TCP\n   *   regServer: \"pbx.com\", // default taken from domain\n   *   regTimeout: 300, // default 300\n   * }\n   *\n   * @param {Object} configuration\n   * @returns {Promise}\n   */\n  createAccount(configuration: createAccountConfiguration) {\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.createAccount(\n        configuration,\n        (successful: boolean, data: AccountConstructor) => {\n          if (successful) {\n            resolve(new Account(data));\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  // replaceAccount(account: any, configuration: any) {\n  //   throw new Error(\"Not implemented\");\n  // }\n\n  /**\n   * Update registration or perform unregistration.\n   * If registration is configured for this account, then initial SIP REGISTER will be sent when the account is added.\n   * Application normally only need to call this function if it wants to manually update the registration or to unregister from the server.\n   *\n   * @param {Account} account\n   * @param bool renew If renew argument is zero, this will start unregistration process.\n   * @returns {Promise}\n   */\n  registerAccount(account: Account, renew = true) {\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.registerAccount(\n        account.getId(),\n        renew,\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * Delete an account. This will unregister the account from the SIP server, if necessary, and terminate server side presence subscriptions associated with this account.\n   *\n   * @param {Account} account\n   * @returns {Promise}\n   */\n  deleteAccount(account: Account) {\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.deleteAccount(\n        account.getId(),\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * Make an outgoing call to the specified URI.\n   * Available call settings:\n   * - audioCount - Number of simultaneous active audio streams for this call. Setting this to zero will disable audio in this call.\n   * - videoCount - Number of simultaneous active video streams for this call. Setting this to zero will disable video in this call.\n   * -\n   *\n   * @param account {Account}\n   * @param destination {String} Destination SIP URI.\n   * @param callSettings {PjSipCallSetttings} Outgoing call settings.\n   * @param msgSettings {PjSipMsgData} Outgoing call additional information to be sent with outgoing SIP message.\n   */\n  makeCall(\n    account: Account,\n    destination: string,\n    callSettings: PjSipCallSetttings,\n    msgData: PjSipMsgData\n  ) {\n    const normalizedDestination = this._normalize(account, destination);\n\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.makeCall(\n        account.getId(),\n        normalizedDestination,\n        callSettings,\n        msgData,\n        (successful: boolean, data: CallConstructor) => {\n          if (successful) {\n            resolve(new Call(data));\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * Send message to the specified URI.\n   * -\n   *\n   * @param account {Account}\n   * @param destination {String} Destination SIP URI.\n   * @param msg {String} Message.\n   */\n  sendMessage(account: Account, destination: string, msg: string) {\n    const normalizedDestination = this._normalize(account, destination);\n\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.sendMessage(\n        account.getId(),\n        normalizedDestination,\n        msg,\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  imTyping(account: Account, destination: string, isTyping: boolean) {\n    const normalizedDestination = this._normalize(account, destination);\n\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.imTyping(\n        account.getId(),\n        normalizedDestination,\n        isTyping,\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * Send response to incoming INVITE request.\n   *\n   * @param call {Call} Call instance\n   * @returns {Promise}\n   */\n  answerCall(call: Call) {\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.answerCall(\n        call.getId(),\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * Hangup call by using method that is appropriate according to the call state.\n   *\n   * @param call {Call} Call instance\n   * @returns {Promise}\n   */\n  hangupCall(call: Call) {\n    // TODO: Add possibility to pass code and reason for hangup.\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.hangupCall(\n        call.getId(),\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * Hangup call by using Decline (603) method.\n   *\n   * @param call {Call} Call instance\n   * @returns {Promise}\n   */\n  declineCall(call: Call) {\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.declineCall(\n        call.getId(),\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * Put the specified call on hold. This will send re-INVITE with the appropriate SDP to inform remote that the call is being put on hold.\n   *\n   * @param call {Call} Call instance\n   * @returns {Promise}\n   */\n  holdCall(call: Call) {\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.holdCall(\n        call.getId(),\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * Release the specified call from hold. This will send re-INVITE with the appropriate SDP to inform remote that the call is resumed.\n   *\n   * @param call {Call} Call instance\n   * @returns {Promise}\n   */\n  unholdCall(call: Call) {\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.unholdCall(\n        call.getId(),\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * @param call {Call} Call instance\n   * @returns {Promise}\n   */\n  muteCall(call: Call) {\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.muteCall(\n        call.getId(),\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * @param call {Call} Call instance\n   * @returns {Promise}\n   */\n  unMuteCall(call: Call) {\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.unMuteCall(\n        call.getId(),\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * @param call {Call} Call instance\n   * @returns {Promise}\n   */\n  useSpeaker(call: Call) {\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.useSpeaker(\n        call.getId(),\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * @param call {Call} Call instance\n   * @returns {Promise}\n   */\n  useEarpiece(call: Call) {\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.useEarpiece(\n        call.getId(),\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * Initiate call transfer to the specified address.\n   * This function will send REFER request to instruct remote call party to initiate a new INVITE session to the specified destination/target.\n   *\n   * @param account {Account} Account associated with call.\n   * @param call {Call} The call to be transferred.\n   * @param destination URI of new target to be contacted. The URI may be in name address or addr-spec format.\n   * @returns {Promise}\n   */\n  xferCall(account: Account, call: Call, destination: string) {\n    const normalizedDestination = this._normalize(account, destination);\n\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.xferCall(\n        call.getId(),\n        normalizedDestination,\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * Initiate attended call transfer.\n   * This function will send REFER request to instruct remote call party to initiate new INVITE session to the URL of destCall.\n   * The party at destCall then should \"replace\" the call with us with the new call from the REFER recipient.\n   *\n   * @param call {Call} The call to be transferred.\n   * @param destCall {Call} The call to be transferred.\n   * @returns {Promise}\n   */\n  xferReplacesCall(call: Call, destCall: Call) {\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.xferReplacesCall(\n        call.getId(),\n        destCall.getId(),\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * Redirect (forward) specified call to destination.\n   * This function will send response to INVITE to instruct remote call party to redirect incoming call to the specified destination/target.\n   *\n   * @param account {Account} Account associated with call.\n   * @param call {Call} The call to be transferred.\n   * @param destination URI of new target to be contacted. The URI may be in name address or addr-spec format.\n   * @returns {Promise}\n   */\n  redirectCall(account: Account, call: Call, destination: string) {\n    const normalizedDestination = this._normalize(account, destination);\n\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.redirectCall(\n        call.getId(),\n        normalizedDestination,\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * Send DTMF digits to remote using RFC 2833 payload formats.\n   *\n   * @param call {Call} Call instance\n   * @param digits {String} DTMF string digits to be sent as described on RFC 2833 section 3.10.\n   * @returns {Promise}\n   */\n  dtmfCall(call: Call, digits: string) {\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.dtmfCall(\n        call.getId(),\n        digits,\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  activateAudioSession() {\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.activateAudioSession(\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  deactivateAudioSession() {\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.deactivateAudioSession(\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  changeOrientation(orientation: OrientationType) {\n    if (ORIENTATIONS.indexOf(orientation) === -1) {\n      throw new Error(\n        `Invalid ${JSON.stringify(\n          orientation\n        )} device orientation, but expected ${ORIENTATIONS.join(', ')} values`\n      );\n    }\n\n    NativeModules.PjSipModule.changeOrientation(orientation);\n  }\n\n  changeCodecSettings(codecSettings: any) {\n    return new Promise((resolve, reject) => {\n      NativeModules.PjSipModule.changeCodecSettings(\n        codecSettings,\n        (successful: boolean, data: any) => {\n          if (successful) {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * @fires Endpoint#connectivity_changed\n   * @private\n   * @param data {Object}\n   */\n  _onConnectivityChanged(data: AccountConstructor) {\n    /**\n     * Fires when registration status has changed.\n     *\n     * @event Endpoint#connectivity_changed\n     * @property {Account} account\n     */\n    this.emit('connectivity_changed', new Account(data));\n  }\n\n  /**\n   * @fires Endpoint#gsm_changed\n   * @private\n   * @param data {Boolean}\n   */\n  _onGSMChanged(data: any) {\n    /**\n     * Fires when registration status has changed.\n     *\n     * @event Endpoint#gsm_changed\n     * @property {Boolean} isUsingGSM\n     */\n    this.emit('gsm_changed', data);\n  }\n\n  /**\n   * @fires Endpoint#registration_changed\n   * @private\n   * @param data {Object}\n   */\n  _onRegistrationChanged(data: any) {\n    /**\n     * Fires when registration status has changed.\n     *\n     * @event Endpoint#registration_changed\n     * @property {Account} account\n     */\n    this.emit('registration_changed', new Account(data));\n  }\n\n  /**\n   * @fires Endpoint#call_received\n   * @private\n   * @param data {Object}\n   */\n  _onCallReceived(data: CallConstructor) {\n    /**\n     * TODO\n     *\n     * @event Endpoint#call_received\n     * @property {Call} call\n     */\n    this.emit('call_received', new Call(data));\n  }\n\n  /**\n   * @fires Endpoint#call_changed\n   * @private\n   * @param data {Object}\n   */\n  _onCallChanged(data: CallConstructor) {\n    /**\n     * TODO\n     *\n     * @event Endpoint#call_changed\n     * @property {Call} call\n     */\n    this.emit('call_changed', new Call(data));\n  }\n\n  /**\n   * @fires Endpoint#call_terminated\n   * @private\n   * @param data {Object}\n   */\n  _onCallTerminated(data: CallConstructor) {\n    /**\n     * TODO\n     *\n     * @event Endpoint#call_terminated\n     * @property {Call} call\n     */\n    this.emit('call_terminated', new Call(data));\n  }\n\n  /**\n   * @fires Endpoint#call_screen_locked\n   * @private\n   * @param lock bool\n   */\n  _onCallScreenLocked(lock: boolean) {\n    /**\n     * TODO\n     *\n     * @event Endpoint#call_screen_locked\n     * @property bool lock\n     */\n    this.emit('call_screen_locked', lock);\n  }\n\n  /**\n   * @fires Endpoint#message_received\n   * @private\n   * @param data {Object}\n   */\n  _onMessageReceived(data: any) {\n    /**\n     * TODO\n     *\n     * @event Endpoint#message_received\n     * @property {Message} message\n     */\n    this.emit('message_received', new Message(data));\n  }\n\n  // /**\n  //  * @fires Endpoint#connectivity_changed\n  //  * @private\n  //  * @param available bool\n  //  */\n  // _onConnectivityChanged(available) {\n  //   /**\n  //    * @event Endpoint#connectivity_changed\n  //    * @property bool available True if connectivity matches current Network settings, otherwise false.\n  //    */\n  //   this.emit(\"connectivity_changed\", available);\n  // }\n\n  /**\n   * Normalize Destination URI\n   *\n   * @param account\n   * @param destination {string}\n   * @returns {string}\n   * @private\n   */\n  _normalize(account: Account, destination: string) {\n    let normalizedData = null;\n    if (!destination.startsWith('sip:')) {\n      let realm = account.getRegServer();\n\n      if (!realm) {\n        realm = account.getDomain();\n        const s = realm.indexOf(':');\n\n        if (s > 0) {\n          realm = realm.substr(0, s + 1);\n        }\n      }\n\n      normalizedData = `sip:${destination}@${realm}`;\n    }\n\n    return normalizedData;\n  }\n  // setUaConfig(UaConfig value)\n  // setMaxCalls\n  // setUserAgent\n  // setNatTypeInSdp\n\n  // setLogConfig(LogConfig value)\n  // setLevel\n}\n"]}