{"version":3,"sources":["Message.ts"],"names":["Message","constructor","props","accountId","contactUri","fromUri","toUri","body","contentType","fromNumber","fromName","match","_fromName","_fromNumber","slice","_accountId","_contactUri","_fromUri","_toUri","_body","_contentType","getAccountId","getContactUri","getFromUri","getFromName","getFromNumber","getToUri","getBody","getContentType"],"mappings":";;AAAA;AACA;AACA;AAWA,eAAe,MAAMA,OAAN,CAAc;AAiB3BC,EAAAA,WAAW,CAACC,KAAD,EAA4B;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AACrC,UAAM;AAAEC,MAAAA,SAAF;AAAaC,MAAAA,UAAb;AAAyBC,MAAAA,OAAzB;AAAkCC,MAAAA,KAAlC;AAAyCC,MAAAA,IAAzC;AAA+CC,MAAAA;AAA/C,QAA+DN,KAArE;AACA,QAAIO,UAAU,GAAG,IAAjB;AACA,QAAIC,QAAQ,GAAG,IAAf;;AAEA,QAAIL,OAAJ,EAAa;AACX,UAAIM,KAAK,GAAGN,OAAO,CAACM,KAAR,CAAc,yBAAd,CAAZ;;AAEA,UAAIA,KAAJ,EAAW;AACT,cAAM,CAACC,SAAD,EAAYC,WAAZ,IAA2BF,KAAK,CAACG,KAAN,CAAY,CAAZ,CAAjC;AACAJ,QAAAA,QAAQ,GAAGE,SAAX;AACAH,QAAAA,UAAU,GAAGI,WAAb;AACD,OAJD,MAIO;AACLF,QAAAA,KAAK,GAAGN,OAAO,CAACM,KAAR,CAAc,cAAd,CAAR;;AAEA,YAAIA,KAAJ,EAAW;AACT,gBAAM,CAACE,WAAD,IAAgBF,KAAK,CAACG,KAAN,CAAY,CAAZ,CAAtB;AAEAL,UAAAA,UAAU,GAAGI,WAAb;AACD;AACF;AACF;;AAED,SAAKE,UAAL,GAAkBZ,SAAlB;AACA,SAAKa,WAAL,GAAmBZ,UAAnB;AACA,SAAKa,QAAL,GAAgBZ,OAAhB;AACA,SAAKO,SAAL,GAAiBF,QAAjB;AACA,SAAKG,WAAL,GAAmBJ,UAAnB;AACA,SAAKS,MAAL,GAAcZ,KAAd;AACA,SAAKa,KAAL,GAAaZ,IAAb;AACA,SAAKa,YAAL,GAAoBZ,WAApB;AACD;AAED;AACF;AACA;AACA;;;AACEa,EAAAA,YAAY,GAAG;AACb,WAAO,KAAKN,UAAZ;AACD;AAED;AACF;AACA;AACA;;;AACEO,EAAAA,aAAa,GAAG;AACd,WAAO,KAAKN,WAAZ;AACD;AAED;AACF;AACA;AACA;;;AACEO,EAAAA,UAAU,GAAG;AACX,WAAO,KAAKN,QAAZ;AACD;AAED;AACF;AACA;AACA;;;AACEO,EAAAA,WAAW,GAAG;AACZ,WAAO,KAAKZ,SAAZ;AACD;AAED;AACF;AACA;AACA;;;AACEa,EAAAA,aAAa,GAAG;AACd,WAAO,KAAKZ,WAAZ;AACD;AAED;AACF;AACA;AACA;;;AACEa,EAAAA,QAAQ,GAAG;AACT,WAAO,KAAKR,MAAZ;AACD;AAED;AACF;AACA;AACA;;;AACES,EAAAA,OAAO,GAAG;AACR,WAAO,KAAKR,KAAZ;AACD;AAED;AACF;AACA;AACA;;;AACES,EAAAA,cAAc,GAAG;AACf,WAAO,KAAKR,YAAZ;AACD;;AAhH0B","sourcesContent":["/**\n * This class describes the information and current status of a call.\n */\n\ninterface MessageConstructor {\n  accountId: number;\n  contactUri: string;\n  fromUri: string;\n  toUri: string;\n  body: string;\n  contentType: string;\n}\n\nexport default class Message {\n  _accountId: number;\n\n  _contactUri: string;\n\n  _fromUri: string;\n\n  _fromName: string | null;\n\n  _fromNumber: string | null;\n\n  _toUri: string;\n\n  _body: string;\n\n  _contentType: string;\n\n  constructor(props: MessageConstructor) {\n    const { accountId, contactUri, fromUri, toUri, body, contentType } = props;\n    let fromNumber = null;\n    let fromName = null;\n\n    if (fromUri) {\n      let match = fromUri.match(/\"([^\"]+)\" <sip:([^@]+)@/);\n\n      if (match) {\n        const [_fromName, _fromNumber] = match.slice(1);\n        fromName = _fromName;\n        fromNumber = _fromNumber;\n      } else {\n        match = fromUri.match(/sip:([^@]+)@/);\n\n        if (match) {\n          const [_fromNumber] = match.slice(1);\n\n          fromNumber = _fromNumber;\n        }\n      }\n    }\n\n    this._accountId = accountId;\n    this._contactUri = contactUri;\n    this._fromUri = fromUri;\n    this._fromName = fromName;\n    this._fromNumber = fromNumber;\n    this._toUri = toUri;\n    this._body = body;\n    this._contentType = contentType;\n  }\n\n  /**\n   * The account ID where this message belongs.\n   * @returns {int}\n   */\n  getAccountId() {\n    return this._accountId;\n  }\n\n  /**\n   * The Contact URI of the sender, if present.\n   * @returns {String}\n   */\n  getContactUri() {\n    return this._contactUri;\n  }\n\n  /**\n   * URI of the sender.\n   * @returns {String}\n   */\n  getFromUri() {\n    return this._fromUri;\n  }\n\n  /**\n   * Sender name, or NULL if no name specified in URI.\n   * @returns {String}\n   */\n  getFromName() {\n    return this._fromName;\n  }\n\n  /**\n   * Sender number\n   * @returns {String}\n   */\n  getFromNumber() {\n    return this._fromNumber;\n  }\n\n  /**\n   * URI of the destination message.\n   * @returns {String}\n   */\n  getToUri() {\n    return this._toUri;\n  }\n\n  /**\n   * Message body, or NULL if no message body is attached to this mesage.\n   * @returns {String}\n   */\n  getBody() {\n    return this._body;\n  }\n\n  /**\n   * MIME type of the message.\n   * @returns {String}\n   */\n  getContentType() {\n    return this._contentType;\n  }\n}\n"]}